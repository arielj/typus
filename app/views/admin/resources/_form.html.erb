<%= render 'form_javascripts' %>

<%= form_for @item, url: {controller: "admin/#{@item.class.to_s.pluralize.downcase}", action: 'update', id: @item.id}, html: { role: 'form', multipart: true } do |form| %>

  <%= render 'helpers/admin/resources/errors' %>

  <%= build_form(fields, form) %>

  <% if headless_mode? %>
    <% unless @item.new_record? %>
      <%= hidden_field_tag '_id', @item.id %>
      <%= hidden_field_tag '_label', @item.to_label %>
    <% end %>
    <%= hidden_field_tag '_continue' %>
  <% else %>
    <% build_save_options.each do |key, value, _| %>
      <%
        klass = key.eql?(:_save) ? 'btn btn-primary' : 'btn btn-default'
        options = { name: key, onclick: 'Typus.setConfirmUnload(false);', class: klass }
      %>
      <%= submit_tag t(value), options %>
    <% end %>
  <% end %>

<% end %>
